<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Trailerflix</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"
    />
    <link rel="stylesheet" href="./css/style.css" />
    <script>
      // Detectar la base path para GitHub Pages
      (function() {
        const pathname = window.location.pathname;
        let basePath = '/';
        
        // Remover el nombre del archivo si existe (index.html, movie.html, etc.)
        const pathWithoutFile = pathname.replace(/\/[^/]+\.html$/, '').replace(/\/$/, '');
        
        // Extraer segmentos del path
        const segments = pathWithoutFile.split('/').filter(s => s);
        
        // Si hay segmentos, el primero es el nombre del repositorio
        // Ejemplo: '/repo-name/' -> segments = ['repo-name'] -> basePath = '/repo-name/'
        if (segments.length > 0) {
          basePath = '/' + segments[0] + '/';
        }
        
        // Guardar la base path globalmente
        window.BASE_PATH = basePath;
      })();
    </script>
    <script defer src="./js/search-filters.js"></script>
    <script defer src="./js/app.js"></script>
    <script defer src="./js/login.js"></script>
  </head>
  <body class="black-background">
    <header>
      <div class="title">
        <h1 class="red-text logo-title">TRAILERFLIX</h1>
      </div>
      <div class="login-container">
        <form id="loginForm" style="display: none">
          <input type="text" id="username" placeholder="Usuario" required />
          <input
            type="password"
            id="password"
            placeholder="Contrase√±a"
            required
          />
          <button type="submit">Ingresar</button>
        </form>
        <div id="userInfo" style="display: none">
          <span id="userNameDisplay"></span>
          <button id="logoutBtn">Cerrar sesi√≥n</button>
        </div>
      </div>
    </header>
    <main>
      <section class="search-filters-section">
        <div class="search-container">
          <input 
            type="text" 
            id="searchInput" 
            class="search-input" 
            placeholder="Buscar pel√≠culas y series..." 
            autocomplete="off"
          />
          <span class="search-icon">üîç</span>
        </div>
        
        <div class="filters-container">
          <div class="filter-group">
            <label class="filter-label">G√©nero:</label>
            <div id="genreFilters" class="filter-buttons"></div>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Categor√≠a:</label>
            <div id="categoryFilters" class="filter-buttons">
              <button class="filter-btn" data-category="Pel√≠cula">Pel√≠cula</button>
              <button class="filter-btn" data-category="Serie">Serie</button>
            </div>
          </div>
          
          <button id="clearFilters" class="clear-btn">Limpiar Filtros</button>
        </div>
        
        <div id="resultsCount" class="results-count"></div>
      </section>
      
      <article class="container loading">
        <div class="loader"></div>
      </article>
    </main>
  </body>
</html>
